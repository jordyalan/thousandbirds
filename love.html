<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ‘çš„ç†æƒ³ã„†å‹åå–® (æ›´æ–°ç‰ˆ)</title>
    <style>
        body {
            font-family: "Microsoft JhengHei", "Heiti TC", Arial, sans-serif;
            background-color: #f4f4f9;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            max-width: 600px;
            width: 100%;
        }
        h2 {
            text-align: center;
            color: #333;
            margin-bottom: 20px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #555;
        }
        select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 16px;
            outline: none;
        }
        select:focus {
            border-color: #28a745;
        }
        button {
            width: 100%;
            padding: 12px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 10px;
            transition: background 0.3s;
            font-weight: bold;
        }
        button:hover {
            background-color: #218838;
        }
        
        /* çµ±è¨ˆè³‡è¨Šå€åŸŸ */
        .stats-header {
            margin-top: 25px;
            font-size: 1.1em;
            color: #28a745;
            font-weight: bold;
            text-align: center;
        }
        .stats-footer {
            margin-top: 15px;
            font-size: 0.9em;
            color: #888;
            text-align: right;
            border-top: 1px solid #eee;
            padding-top: 10px;
        }

        .result-list {
            list-style: none;
            padding: 0;
            margin-top: 10px;
        }
        .result-list li {
            background: #f8f9fa;
            margin: 5px 0;
            padding: 10px 15px;
            border-radius: 5px;
            border-left: 5px solid #28a745;
            color: #333;
            font-size: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .tag {
            font-size: 12px;
            padding: 2px 8px;
            border-radius: 10px;
            margin-left: 10px;
            background: #e9ecef;
            color: #495057;
            font-weight: bold;
        }
        .no-result {
            color: #888;
            text-align: center;
            margin-top: 20px;
            padding: 10px;
            background: #fff;
            border: 1px dashed #ccc;
            border-radius: 5px;
        }

        /* çœŸå‘½å¤©å­æ¨è–¦å€å¡Š */
        .recommendation-box {
            margin-top: 25px;
            background: linear-gradient(135deg, #fff0f0 0%, #ffe6e6 100%);
            border: 2px solid #ffc1c1;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            display: none; /* é è¨­éš±è— */
            animation: popIn 0.5s ease-out;
        }
        .recommendation-title {
            color: #e83e8c;
            font-weight: bold;
            font-size: 1.2em;
            margin-bottom: 10px;
        }
        .recommendation-name {
            font-size: 1.5em;
            color: #333;
            font-weight: bold;
        }

        @keyframes popIn {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        .note {
            font-size: 13px;
            color: #666;
            margin-top: 20px;
            background: #fff3cd;
            padding: 15px;
            border-radius: 5px;
            line-height: 1.6;
        }
    </style>
</head>
<body>

<div class="container">
    <h2>ğŸŒˆ æˆ‘çš„ç†æƒ³ã„†å‹åå–® ğŸ’¦</h2>

    <div class="form-group">
        <label for="roleSelect">1. æˆ‘çš„è§’è‰² (å°‹æ‰¾å°è±¡)</label>
        <select id="roleSelect">
            <option value="1">ğŸ†1è™Ÿ (åˆ—å‡º 0è™Ÿã€ä¸åˆ†)</option>
            <option value="0">ğŸ«¶0è™Ÿ (åˆ—å‡º 1è™Ÿã€ä¸åˆ†)</option>
            <option value="0.5">ğŸ•ºä¸åˆ† (åˆ—å‡º 1è™Ÿã€0è™Ÿã€ä¸åˆ†)</option>
            <option value="Side">ğŸ‘‹Side (åˆ—å‡º Side)</option>
            <option value="69">ğŸ’‹ç´”69 (åˆ—å‡º ç´”69)</option>
        </select>
    </div>

    <div class="form-group">
        <label for="myBody">2. æˆ‘çš„é«”å‹ </label>
        <select id="myBody">
            <option value="ç†Š">ç†ŠğŸ»</option>
            <option value="çŒ´">çŒ´ğŸ’</option>
        </select>
    </div>

    <div class="form-group">
        <label for="prefBody">3. å–œæ­¡çš„é«”å‹â¤ï¸</label>
        <select id="prefBody">
            <option value="ç†Š">ç†ŠğŸ»</option>
            <option value="çŒ´">çŒ´ğŸ’</option>
            <option value="éƒ½å¯">ğŸ»ğŸ’éƒ½å¯</option>
        </select>
    </div>

    <button onclick="filterList()">ğŸ” é–‹å§‹ç¯©é¸</button>

    <!-- çµæœé¡¯ç¤ºå€åŸŸ -->
    <div id="result-area">
        <!-- 1. é¡¯ç¤ºç¬¦åˆæ•¸é‡ -->
        <div id="matchCountHeader" class="stats-header"></div>
        
        <!-- åˆ—è¡¨ -->
        <ul id="resultList" class="result-list"></ul>
        
        <!-- 2. é¡¯ç¤ºç¸½è³‡æ–™åº«äººæ•¸ -->
        <div id="totalDbFooter" class="stats-footer"></div>
    </div>

    <!-- 3. çœŸå‘½å¤©å­æ¨è–¦ -->
    <div id="recommendationBox" class="recommendation-box">
        <div class="recommendation-title">ğŸ’˜ ä»–å¯èƒ½æ˜¯ä½ çš„çœŸå‘½å¤©å­</div>
        <div id="luckyOneName" class="recommendation-name"></div>
    </div>
    
    <div class="note">
        <strong>æ›´æ–°èªªæ˜ï¼š</strong><br>
        1. <strong>è³‡æ–™ä¿®æ­£ï¼š</strong> "ç¿”å¤ª / Sean" å·²ç§»å‹•è‡³ã€ŒçŒ´å–œçŒ´ã€åˆ†é¡ã€‚<br>
        2. <strong>åŠŸèƒ½ç¶­æŒï¼š</strong> åŒ…å«äººæ•¸çµ±è¨ˆèˆ‡çœŸå‘½å¤©å­æ¨è–¦åŠŸèƒ½ã€‚
    </div>
</div>

<script>
    // --- è³‡æ–™åº« ---
    
    const roleData = {
        "1è™Ÿ": [
            "è©¹Cos", "å°ç§‰", "é˜¿ä»»", "George", "By-n", "Hsu", "å¿—å¿ ", "é˜¿ç¿°", 
            "ğŸŒ¹ğ“œğ“¢æ—ç½ç½1.0", "å²å®‡å¼“ã„™", "å¥§æ–¯å¡Â²", "è€€å¤©", "é™³å¨æˆ", "Parker Yang", 
            "ï£¿å¥§ï£¿åµï£¿å¤šï£¿", "â€œå‡±â€ï¼ˆ^_-ï¼‰", "é´»æ˜ŸğŸŒŸ-HongXing", "DK", "å‹³", "JimYu", 
            "ğŸŒ¹ğ“œğ“¢ å¨ƒå¨ƒæ—"
        ],
        "0è™Ÿ": [
            "è’å™ª", "ğŸŸ", "è²“è²“è²“", "æ¯›æ€ªMao(*'ã¸'*)", "é˜¿å¸ƒ", "ä¿å®‰", "ğŸŒ¹Lucasç«£ğŸŒ¹", 
            "Woody", "æµ©æµ©ğŸ±", "PiccoloåŸƒçš®", "CKB", "å°åŠ‰", "event(å‡±å‡±)", "é€¸å€«", 
            "æŸä¸ (39è¨ˆç¨‹è»Š)", "Alexå³ç¶­", "ğŸŒ¹ä¿Šæ›‰", "XHğ“œğ“ŸğŸŒ¹", "ã«»ã„ã„¨ã„£Ë‹å¯¶", 
            "Jordy", "ğ“œğ“¢é˜¿å°¼å°¼", "é˜¿æ±"
        ],
        "ä¸åˆ†": [
            "é˜¿å¸ƒ", "Dindon Lin", "Danny", "XuezheWuå­¸å“²", "aaron", "è¨±å“²ç¶­", 
            "å±±å§†ğŸ³", "YusiangHong", "å¤å¤©+", "éŠ˜å³» Silas", "ğŸƒ", "Juan", "å»ºå„„", 
            "é¦¬å¥ç¶¸", "æ’¼éœ‡", "æ£•æ«šæ¨¹LV1", "å¨å»‰", "Francis  ğŸ¢â¤ï¸ğŸ»ğŸ·", 
            "ç¿”å¤ª / Sean", 
            "ğŸ’ªè¼ä»”ğŸ’ğŸµ", "æ—å°è¨±", "ç¾…(Roger)", "Scott Huang", "åèˆœ Tim", "å°¤è‹±ä»»â„", 
            "Foodpandaå¤–é€å“¡-å°é›", "Zhan Wen", "Naker", "é»‘çš®ã®é”", "VW boyuan", 
            "ğŸ‘å®‡å“²/Adolph/é˜¿éº¥â¤ï¸", "å°çš“", "ç´„æ›¸äº", "Sheng", "å°é‡‘é˜¿å‚‘", 
            "è³‡è¨Šåˆ†çµ„-Weiä»”", "ğ“›ğ“¾ğ“¬ğ“ªğ“¼ å®¥æœ‹",
            "Heng", "Rex~å’Œ"
        ],
        "Side": [
            "Nick", "åŠ‰äº¦è»’(å°åµBlue)", "ç«¯å³»", "Ø¯David â™‚èŒ¶ç±³â™‚"
        ],
        "ç´”69": [
            "å…‹å¯¶Jå¤§å¯¶", "å°é¦¬"
        ]
    };

    // â˜… æ›´æ–°å¾Œçš„é«”å‹è³‡æ–™ â˜…
    const typeData = {
        "ç†Šå–œç†Š": ["ç†Šå–œç†Š", "ğ“›ğ“¾ğ“¬ğ“ªğ“¼ å®¥æœ‹", "æ’¼éœ‡"],
        
        "ç†Šå–œçŒ´": [
            "Dindon Lin", "Heng", "ä¿å®‰", "Nick", "é˜¿ç¿°", "å»ºå„„", 
            "Rex~å’Œ", "å¥§æ–¯å¡Â²", "Zhan Wen", "é»‘çš®ã®é”", "é´»æ˜ŸğŸŒŸ-HongXing", 
            "å°çš“", "DK", "ç´„æ›¸äº", "ğŸŒ¹ğ“œğ“¢ å¨ƒå¨ƒæ—"
        ],
        
        "çŒ´å–œç†Š": [
            "å±±å§†ğŸ³", "ğŸƒ", "é™³å¨æˆ", "è€€å¤©", "Francis  ğŸ¢â¤ï¸ğŸ»ğŸ·", "å°¤è‹±ä»»â„", 
            "åèˆœ Tim", "Parker Yang", "è³‡è¨Šåˆ†çµ„-Weiä»”", "å‹³"
        ],
        
        // å°‡ "ç¿”å¤ª / Sean" åŠ å…¥æ­¤è™•
        "çŒ´å–œçŒ´": [
            "George", "Danny", "aaron", "Weiting", "è’å™ª", "YusiangHong", "By-n", 
            "ğŸŸ", "æå­Ÿæ¾¤", "å¤å¤©+", "éŠ˜å³» Silas", "Woody", "PiccoloåŸƒçš®", "å¿—å¿ ", 
            "Juan", "å°åŠ‰", "å°ç§‰", "åŠ‰äº¦è»’(å°åµBlue)", "å¨å»‰", "å²å®‡å¼“ã„™", 
            "ç¾… (Roger)", "Ø¯David â™‚èŒ¶ç±³â™‚", "ã«»ã„ã„¨ã„£Ë‹å¯¶", "æ—å°è¨±", 
            "ï£¿å¥§ï£¿åµï£¿å¤šï£¿", "Urban", "â€œå‡±â€ï¼ˆ^_-ï¼‰",
            "ç¿”å¤ª / Sean" 
        ],
        
        "ç†ŠçŒ´éƒ½å¯": [
            "é˜¿å¸ƒ", "è©¹Cos", "è¨±å“²ç¶­", "é˜¿ä»»", "XuezheWu å­¸å“²", "è²“è²“è²“", 
            "æ£•æ«šæ¨¹LV1", "æ¯›æ€ªMao(*'ã¸'*)", "Alex å³ç¶­", "HSU", "ğŸŒ¹Lucasç«£ğŸŒ¹", 
            "é˜¿å¸ƒ", "ğŸ’ªè¼ä»”ğŸ’ğŸµ", "æµ©æµ©ğŸ±", "CKB", "event (å‡±å‡±)", "é¦¬å¥ç¶¸", 
            "é€¸å€«", "æŸä¸ (39è¨ˆç¨‹è»Š)", "ç«¯å³»", "ğŸ»ğŸ¯ ç†Šè™ï¼ˆå¤§ç†Šï¼‰EricğŸ»ğŸ¯", 
            "ğŸŒ¹ä¿Šæ›‰", "ğŸŒ¹ğ“œğ“¢æ—ç½ç½1.0", "å…‹å¯¶Jå¤§å¯¶", "Jordy", "Scott Huang", 
            "Foodpandaå¤–é€å“¡-å°é›", "ğ“œğ“¢é˜¿å°¼å°¼", "Naker", "VW boyuan", 
            "å°é¦¬", "XHğ“œğ“ŸğŸŒ¹", "é˜¿æ±", "JimYu", "ğŸ‘å®‡å“²/Adolph/é˜¿éº¥â¤ï¸", "å°é‡‘é˜¿å‚‘"
        ]
    };

    // è¨ˆç®—æœ‰æ•ˆè³‡æ–™åº«äººæ•¸çš„åŠŸèƒ½
    function getValidDatabaseCount() {
        const normalize = (str) => str.replace(/\s+/g, '').toLowerCase();

        // 1. å–å¾—æ‰€æœ‰è§’è‰²åå–®ä¸­çš„ä¸é‡è¤‡äººå
        let allRolePeople = new Set();
        Object.values(roleData).forEach(list => {
            list.forEach(name => allRolePeople.add(normalize(name)));
        });

        // 2. å–å¾—æ‰€æœ‰é«”å‹åå–®ä¸­çš„ä¸é‡è¤‡äººå
        let allTypePeople = new Set();
        Object.values(typeData).forEach(list => {
            list.forEach(name => allTypePeople.add(normalize(name)));
        });

        // 3. å–äº¤é›†
        let validCount = 0;
        allRolePeople.forEach(name => {
            if (allTypePeople.has(name)) {
                validCount++;
            }
        });

        return validCount;
    }

    function filterList() {
        const userRole = document.getElementById('roleSelect').value;
        const myBody = document.getElementById('myBody').value;
        const prefBody = document.getElementById('prefBody').value;
        
        const resultListEl = document.getElementById('resultList');
        const matchCountHeader = document.getElementById('matchCountHeader');
        const totalDbFooter = document.getElementById('totalDbFooter');
        const recommendationBox = document.getElementById('recommendationBox');
        const luckyOneName = document.getElementById('luckyOneName');

        resultListEl.innerHTML = ""; 
        matchCountHeader.innerHTML = "";
        totalDbFooter.innerHTML = "";
        recommendationBox.style.display = "none";

        // 1. è§’è‰²ç¯©é¸
        let roleCandidates = [];
        if (userRole === "1") {
            roleCandidates = [...roleData["ä¸åˆ†"], ...roleData["0è™Ÿ"]];
        } else if (userRole === "0") {
            roleCandidates = [...roleData["ä¸åˆ†"], ...roleData["1è™Ÿ"]];
        } else if (userRole === "0.5") { 
            roleCandidates = [...roleData["1è™Ÿ"], ...roleData["0è™Ÿ"], ...roleData["ä¸åˆ†"]];
        } else if (userRole === "Side") {
            roleCandidates = [...roleData["Side"]];
        } else if (userRole === "69") {
            roleCandidates = [...roleData["ç´”69"]];
        }

        // 2. é«”å‹ç¯©é¸
        let typeCandidates = [];

        if (myBody === "ç†Š" && prefBody === "ç†Š") {
            typeCandidates = [...typeData["ç†Šå–œç†Š"]];
        } 
        else if (myBody === "ç†Š" && prefBody === "çŒ´") {
            typeCandidates = [...typeData["çŒ´å–œç†Š"]]; 
        } 
        else if (myBody === "çŒ´" && prefBody === "ç†Š") {
            typeCandidates = [...typeData["ç†Šå–œçŒ´"]]; 
        } 
        else if (myBody === "çŒ´" && prefBody === "çŒ´") {
            typeCandidates = [...typeData["çŒ´å–œçŒ´"]];
        } 
        else if (myBody === "çŒ´" && prefBody === "éƒ½å¯") {
            typeCandidates = [...typeData["çŒ´å–œçŒ´"], ...typeData["ç†ŠçŒ´éƒ½å¯"], ...typeData["ç†Šå–œçŒ´"]];
        } 
        else if (myBody === "ç†Š" && prefBody === "éƒ½å¯") {
            typeCandidates = [...typeData["ç†Šå–œç†Š"], ...typeData["ç†ŠçŒ´éƒ½å¯"], ...typeData["çŒ´å–œç†Š"]];
        }

        // 3. äº¤å‰æ¯”å°
        const normalize = (str) => str.replace(/\s+/g, '').toLowerCase();
        const typeSet = new Set(typeCandidates.map(name => normalize(name)));

        const finalResults = roleCandidates.filter(name => {
            return typeSet.has(normalize(name));
        });

        const uniqueResults = [...new Set(finalResults)];

        // 4. é¡¯ç¤ºçµæœ
        if (uniqueResults.length > 0) {
            matchCountHeader.innerHTML = `ğŸ‰ æ‰¾åˆ°ç¬¦åˆæ¢ä»¶çš„æœ‰ï¼š${uniqueResults.length} ä½`;

            uniqueResults.forEach(name => {
                const li = document.createElement('li');
                let roleTag = "å…¶ä»–";
                for (const [role, list] of Object.entries(roleData)) {
                    if (list.includes(name)) {
                        roleTag = role;
                        break;
                    }
                }
                li.innerHTML = `<span>${name}</span> <span class="tag">${roleTag}</span>`;
                resultListEl.appendChild(li);
            });

            // æ¨è–¦åŠŸèƒ½
            const randomIndex = Math.floor(Math.random() * uniqueResults.length);
            const luckyOne = uniqueResults[randomIndex];
            luckyOneName.textContent = luckyOne;
            recommendationBox.style.display = "block";

        } else {
            matchCountHeader.innerHTML = `ğŸ˜¢ æ‰¾åˆ°ç¬¦åˆæ¢ä»¶çš„æœ‰ï¼š0 ä½`;
            resultListEl.innerHTML = '<li class="no-result">æ²’æœ‰æ‰¾åˆ°ç¬¦åˆæ¢ä»¶çš„å°è±¡ ğŸ™…â€â™‚ï¸</li>';
        }

        // çµ±è¨ˆ
        const totalValidCount = getValidDatabaseCount();
        totalDbFooter.innerHTML = `ğŸ“Š ç›®å‰è³‡æ–™åº«æœ‰æ•ˆç¸½äººæ•¸ï¼š${totalValidCount} ä½`;
    }
</script>

</body>
</html>